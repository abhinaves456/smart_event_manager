<!DOCTYPE html>
<html>
<head>
    <title>Dashboard</title>
</head>
<body>
    <h1>Welcome, {{ request.user.username }}!</h1>
    <p><a href="{% url 'logout' %}">Logout</a></p>

    {% if messages %}
        <ul class="messages">
            {% for message in messages %}
                <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}

    <hr>

    <h2>Available Events</h2>
    {% for event in events %}
        <div>
            <h3>{{ event.title }}</h3>
            <p>{{ event.description }}</p>
            <p><strong>Location:</strong> {{ event.location }}</p>
            <p><strong>Date:</strong> {{ event.date }}</p>

            {% if event.id in booked_event_ids %}
                <button disabled>Booked</button>
            {% else %}
                <a href="{% url 'book_ticket' event.id %}"><button>Book Ticket</button></a>
            {% endif %}
        </div>
    {% empty %}
        <p>No events available at the moment.</p>
    {% endfor %}

    <hr>

    <h2>Your Registered Events</h2>
    {% for ticket in tickets %}
        <div>
            <h3>{{ ticket.event.title }}</h3>
            <p>Booked on: {{ ticket.booking_time }}</p>
            </div>
    {% empty %}
        <p>You have not registered for any events.</p>
    {% endfor %}

</body>
</html>